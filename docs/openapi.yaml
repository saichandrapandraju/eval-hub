openapi: 3.1.0
info:
  title: Eval Hub
  description: API REST server for evaluation backend orchestration on OpenShift
  version: 0.1.0
paths:
  /metrics:
    get:
      summary: Metrics
      description: Prometheus metrics endpoint with MLflow health check.
      operationId: metrics_metrics_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/health:
    get:
      summary: Health Check
      description: Health check endpoint.
      operationId: health_check_api_v1_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
  /api/v1/evaluations/jobs:
    post:
      tags:
      - Evaluations
      summary: Create Evaluation
      description: Create and execute evaluation request using the simplified benchmark
        schema.
      operationId: create_evaluation_api_v1_evaluations_jobs_post
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SimpleEvaluationRequest'
      responses:
        '202':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EvaluationResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - Evaluations
      summary: List Evaluations
      description: List all evaluation requests.
      operationId: list_evaluations_api_v1_evaluations_jobs_get
      parameters:
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum number of evaluations to return
          default: 50
          title: Limit
        description: Maximum number of evaluations to return
      - name: status_filter
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by status
          title: Status Filter
        description: Filter by status
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EvaluationResponse'
                title: Response List Evaluations Api V1 Evaluations Jobs Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/evaluations/jobs/{id}:
    get:
      tags:
      - Evaluations
      summary: Get Evaluation Status
      description: Get the status of an evaluation request.
      operationId: get_evaluation_status_api_v1_evaluations_jobs__id__get
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EvaluationResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - Evaluations
      summary: Cancel Evaluation
      description: Cancel a running evaluation.
      operationId: cancel_evaluation_api_v1_evaluations_jobs__id__delete
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/evaluations/jobs/{id}/summary:
    get:
      tags:
      - Evaluations
      summary: Get Evaluation Summary
      description: Get a summary of an evaluation request.
      operationId: get_evaluation_summary_api_v1_evaluations_jobs__id__summary_get
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
                title: Response Get Evaluation Summary Api V1 Evaluations Jobs  Id  Summary
                  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/metrics/system:
    get:
      summary: Get System Metrics
      description: Get system metrics and statistics.
      operationId: get_system_metrics_api_v1_metrics_system_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Get System Metrics Api V1 Metrics System Get
  /api/v1/evaluations/providers:
    get:
      tags:
      - Providers
      summary: List Providers
      description: List all registered evaluation providers.
      operationId: list_providers_api_v1_evaluations_providers_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListProvidersResponse'
  /api/v1/evaluations/providers/{provider_id}:
    get:
      tags:
      - Providers
      summary: Get Provider
      description: Get details of a specific provider.
      operationId: get_provider_api_v1_evaluations_providers__provider_id__get
      parameters:
      - name: provider_id
        in: path
        required: true
        schema:
          type: string
          title: Provider Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/evaluations/benchmarks:
    get:
      tags:
      - Benchmarks
      summary: List All Benchmarks
      description: List all available benchmarks across providers (similar to Llama
        Stack format).
      operationId: list_all_benchmarks_api_v1_evaluations_benchmarks_get
      parameters:
      - name: provider_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by provider ID
          title: Provider Id
        description: Filter by provider ID
      - name: category
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by benchmark category
          title: Category
        description: Filter by benchmark category
      - name: tags
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by tags (comma-separated)
          title: Tags
        description: Filter by tags (comma-separated)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListBenchmarksResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/evaluations/collections:
    get:
      tags:
      - Collections
      summary: List Collections
      description: List all benchmark collections.
      operationId: list_collections_api_v1_evaluations_collections_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListCollectionsResponse'
    post:
      tags:
      - Collections
      summary: Create Collection
      description: Create a new collection.
      operationId: create_collection_api_v1_evaluations_collections_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionCreationRequest'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Collection'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/evaluations/collections/{collection_id}:
    get:
      tags:
      - Collections
      summary: Get Collection
      description: Get details of a specific collection.
      operationId: get_collection_api_v1_evaluations_collections__collection_id__get
      parameters:
      - name: collection_id
        in: path
        required: true
        schema:
          type: string
          title: Collection Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Collection'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - Collections
      summary: Update Collection
      description: Update an existing collection.
      operationId: update_collection_api_v1_evaluations_collections__collection_id__put
      parameters:
      - name: collection_id
        in: path
        required: true
        schema:
          type: string
          title: Collection Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionUpdateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Collection'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - Collections
      summary: Patch Collection
      description: Partially update an existing collection.
      operationId: patch_collection_api_v1_evaluations_collections__collection_id__patch
      parameters:
      - name: collection_id
        in: path
        required: true
        schema:
          type: string
          title: Collection Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionUpdateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Collection'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - Collections
      summary: Delete Collection
      description: Delete a collection.
      operationId: delete_collection_api_v1_evaluations_collections__collection_id__delete
      parameters:
      - name: collection_id
        in: path
        required: true
        schema:
          type: string
          title: Collection Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
components:
  schemas:
    Benchmark:
      properties:
        benchmark_id:
          type: string
          title: Benchmark Id
          description: Unique benchmark identifier
        name:
          type: string
          title: Name
          description: Human-readable benchmark name
        description:
          type: string
          title: Description
          description: Benchmark description
        category:
          type: string
          title: Category
          description: Benchmark category
        metrics:
          items:
            type: string
          type: array
          title: Metrics
          description: List of metrics provided by this benchmark
        num_few_shot:
          type: integer
          title: Num Few Shot
          description: Number of few-shot examples
        dataset_size:
          anyOf:
          - type: integer
          - type: 'null'
          title: Dataset Size
          description: Size of the evaluation dataset
        tags:
          items:
            type: string
          type: array
          title: Tags
          description: Tags for categorization
      additionalProperties: true
      type: object
      required:
      - benchmark_id
      - name
      - description
      - category
      - metrics
      - num_few_shot
      title: Benchmark
      description: Benchmark specification.
    BenchmarkConfig:
      properties:
        benchmark_id:
          type: string
          title: Benchmark Id
          description: Benchmark identifier
        provider_id:
          type: string
          title: Provider Id
          description: Provider identifier
        config:
          additionalProperties: true
          type: object
          title: Config
          description: Benchmark configuration including num_fewshot, limit, batch_size,
            etc.
      additionalProperties: true
      type: object
      required:
      - benchmark_id
      - provider_id
      title: BenchmarkConfig
      description: New simplified benchmark specification.
    BenchmarkReference:
      properties:
        provider_id:
          type: string
          title: Provider Id
          description: Provider identifier
        benchmark_id:
          type: string
          title: Benchmark Id
          description: Benchmark identifier
        weight:
          type: number
          title: Weight
          description: Weight for this benchmark in collection scoring
          default: 1.0
        config:
          additionalProperties: true
          type: object
          title: Config
          description: Benchmark-specific configuration
      additionalProperties: true
      type: object
      required:
      - provider_id
      - benchmark_id
      title: BenchmarkReference
      description: Reference to a benchmark within a collection.
    Collection:
      properties:
        collection_id:
          type: string
          title: Collection Id
          description: Unique collection identifier
        name:
          type: string
          title: Name
          description: Human-readable collection name
        description:
          type: string
          title: Description
          description: Collection description
        provider_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Provider Id
          description: Primary provider for this collection
        tags:
          items:
            type: string
          type: array
          title: Tags
          description: Tags for categorizing the collection
        metadata:
          additionalProperties: true
          type: object
          title: Metadata
          description: Additional collection metadata
        benchmarks:
          items:
            $ref: '#/components/schemas/BenchmarkReference'
          type: array
          title: Benchmarks
          description: List of benchmark references in this collection
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
          description: Collection creation timestamp
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
          description: Collection last update timestamp
      additionalProperties: true
      type: object
      required:
      - collection_id
      - name
      - description
      - benchmarks
      title: Collection
      description: Collection of benchmarks for specific evaluation scenarios.
    CollectionCreationRequest:
      properties:
        collection_id:
          type: string
          title: Collection Id
          description: Unique collection identifier
        name:
          type: string
          title: Name
          description: Human-readable collection name
        description:
          type: string
          title: Description
          description: Collection description
        provider_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Provider Id
          description: Primary provider for this collection
        tags:
          items:
            type: string
          type: array
          title: Tags
          description: Tags for categorizing the collection
        metadata:
          additionalProperties: true
          type: object
          title: Metadata
          description: Additional collection metadata
        benchmarks:
          items:
            $ref: '#/components/schemas/BenchmarkReference'
          type: array
          title: Benchmarks
          description: List of benchmark references in this collection
      additionalProperties: true
      type: object
      required:
      - collection_id
      - name
      - description
      - benchmarks
      title: CollectionCreationRequest
      description: Request for creating a new collection.
    CollectionUpdateRequest:
      properties:
        name:
          anyOf:
          - type: string
          - type: 'null'
          title: Name
          description: Human-readable collection name
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          description: Collection description
        provider_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Provider Id
          description: Primary provider for this collection
        tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Tags
          description: Tags for categorizing the collection
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
          description: Additional collection metadata
        benchmarks:
          anyOf:
          - items:
              $ref: '#/components/schemas/BenchmarkReference'
            type: array
          - type: 'null'
          title: Benchmarks
          description: List of benchmark references in this collection
      additionalProperties: true
      type: object
      title: CollectionUpdateRequest
      description: Request for updating an existing collection.
    EvaluationResponse:
      properties:
        id:
          type: string
          format: uuid
          title: Id
          description: Original request ID
        status:
          $ref: '#/components/schemas/EvaluationStatus'
          description: Overall request status
        total_evaluations:
          type: integer
          title: Total Evaluations
          description: Total number of evaluations
        completed_evaluations:
          type: integer
          title: Completed Evaluations
          description: Number of completed evaluations
          default: 0
        failed_evaluations:
          type: integer
          title: Failed Evaluations
          description: Number of failed evaluations
          default: 0
        results:
          items:
            $ref: '#/components/schemas/EvaluationResult'
          type: array
          title: Results
          description: Evaluation results
        aggregated_metrics:
          additionalProperties:
            anyOf:
            - type: number
            - type: integer
            - type: string
          type: object
          title: Aggregated Metrics
          description: Aggregated metrics across all evaluations
        experiment_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Experiment Url
          description: MLFlow experiment URL
        created_at:
          type: string
          format: date-time
          title: Created At
          description: Request creation timestamp
        updated_at:
          type: string
          format: date-time
          title: Updated At
          description: Last update timestamp
        estimated_completion:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Estimated Completion
          description: Estimated completion time
        progress_percentage:
          type: number
          title: Progress Percentage
          description: Overall progress percentage
          default: 0.0
      additionalProperties: true
      type: object
      required:
      - id
      - status
      - total_evaluations
      - created_at
      title: EvaluationResponse
      description: Response payload for evaluation requests.
    EvaluationResult:
      properties:
        evaluation_id:
          type: string
          format: uuid
          title: Evaluation Id
          description: Evaluation ID
        provider_id:
          type: string
          title: Provider Id
          description: Provider that ran the evaluation
        benchmark_id:
          type: string
          title: Benchmark Id
          description: Benchmark identifier
        benchmark_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Benchmark Name
          description: Benchmark display name
        status:
          $ref: '#/components/schemas/EvaluationStatus'
          description: Evaluation status
        metrics:
          additionalProperties:
            anyOf:
            - type: number
            - type: integer
            - type: string
          type: object
          title: Metrics
          description: Evaluation metrics
        artifacts:
          additionalProperties:
            type: string
          type: object
          title: Artifacts
          description: Paths to result artifacts
        error_message:
          anyOf:
          - type: string
          - type: 'null'
          title: Error Message
          description: Error message if failed
        started_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Started At
          description: Start timestamp
        completed_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Completed At
          description: Completion timestamp
        duration_seconds:
          anyOf:
          - type: number
          - type: 'null'
          title: Duration Seconds
          description: Evaluation duration
        mlflow_run_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Mlflow Run Id
          description: MLFlow run ID
      additionalProperties: true
      type: object
      required:
      - evaluation_id
      - provider_id
      - benchmark_id
      - status
      title: EvaluationResult
      description: Result of a single evaluation.
    EvaluationStatus:
      type: string
      enum:
      - pending
      - running
      - completed
      - failed
      - cancelled
      title: EvaluationStatus
      description: Status of an evaluation.
    ExperimentConfig:
      properties:
        name:
          type: string
          title: Name
          description: Experiment name for MLFlow tracking
        tags:
          additionalProperties:
            type: string
          type: object
          title: Tags
          description: Tags for the evaluation experiment
      additionalProperties: true
      type: object
      required:
      - name
      title: ExperimentConfig
      description: Configuration for MLFlow experiment tracking.
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    HealthResponse:
      properties:
        status:
          type: string
          title: Status
          description: Overall health status
        version:
          type: string
          title: Version
          description: Service version
        timestamp:
          type: string
          format: date-time
          title: Timestamp
          description: Health check timestamp
        components:
          additionalProperties:
            additionalProperties: true
            type: object
          type: object
          title: Components
          description: Health status of individual components
        uptime_seconds:
          type: number
          title: Uptime Seconds
          description: Service uptime in seconds
        active_evaluations:
          type: integer
          title: Active Evaluations
          description: Number of active evaluations
          default: 0
      type: object
      required:
      - status
      - version
      - uptime_seconds
      title: HealthResponse
      description: Health check response.
    ListBenchmarksResponse:
      properties:
        benchmarks:
          items:
            additionalProperties: true
            type: object
          type: array
          title: Benchmarks
          description: List of all available benchmarks
        total_count:
          type: integer
          title: Total Count
          description: Total number of benchmarks
        providers_included:
          items:
            type: string
          type: array
          title: Providers Included
          description: List of provider IDs included in the response
      additionalProperties: true
      type: object
      required:
      - benchmarks
      - total_count
      - providers_included
      title: ListBenchmarksResponse
      description: Response for listing all benchmarks (similar to Llama Stack format).
    ListCollectionsResponse:
      properties:
        collections:
          items:
            $ref: '#/components/schemas/Collection'
          type: array
          title: Collections
          description: List of available collections
        total_collections:
          type: integer
          title: Total Collections
          description: Total number of collections
      additionalProperties: true
      type: object
      required:
      - collections
      - total_collections
      title: ListCollectionsResponse
      description: Response for listing all collections.
    ListProvidersResponse:
      properties:
        providers:
          items:
            $ref: '#/components/schemas/ProviderSummary'
          type: array
          title: Providers
          description: List of available providers
        total_providers:
          type: integer
          title: Total Providers
          description: Total number of providers
        total_benchmarks:
          type: integer
          title: Total Benchmarks
          description: Total number of benchmarks across all providers
      additionalProperties: true
      type: object
      required:
      - providers
      - total_providers
      - total_benchmarks
      title: ListProvidersResponse
      description: Response for listing all providers.
    Model:
      properties:
        url:
          type: string
          title: Url
          description: Model endpoint URL
        name:
          type: string
          title: Name
          description: Model name/identifier
        configuration:
          additionalProperties: true
          type: object
          title: Configuration
          description: Model-specific configuration parameters
      additionalProperties: true
      type: object
      required:
      - url
      - name
      title: Model
      description: Model specification for evaluation requests.
    Provider:
      additionalProperties: true
      type: object
    ProviderSummary:
      additionalProperties: true
      type: object
    ProviderType:
      type: string
      enum:
      - builtin
      - nemo-evaluator
      title: ProviderType
      description: Type of evaluation provider.
    SimpleEvaluationRequest:
      properties:
        model:
          $ref: '#/components/schemas/Model'
          description: Model specification for evaluation
        benchmarks:
          items:
            $ref: '#/components/schemas/BenchmarkConfig'
          type: array
          title: Benchmarks
          description: List of benchmarks to evaluate
        experiment:
          $ref: '#/components/schemas/ExperimentConfig'
          description: Experiment configuration for MLFlow tracking
        timeout_minutes:
          type: integer
          title: Timeout Minutes
          description: Timeout for the entire evaluation
          default: 60
        retry_attempts:
          type: integer
          title: Retry Attempts
          description: Number of retry attempts on failure
          default: 3
        request_id:
          type: string
          format: uuid
          title: Request Id
          description: Unique request ID
        async_mode:
          type: boolean
          title: Async Mode
          description: Whether to run evaluations asynchronously
          default: true
        callback_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Callback Url
          description: URL to call when evaluation completes
        created_at:
          type: string
          format: date-time
          title: Created At
          description: Request creation timestamp
      additionalProperties: true
      type: object
      required:
      - model
      - benchmarks
      - experiment
      title: SimpleEvaluationRequest
      description: Simplified evaluation request using the new schema.
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
